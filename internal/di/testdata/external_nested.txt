# Duo setup
go mod edit -replace gitlab.com/mnm/bud=$DUOC_DIR

# Run di
di -d='web.*Web' -o='gen/web/web.go' -e='web.*A' -e='web.*B' -e='web.*C'

# Run go mod tidy
go mod tidy

# Test di
go test main_test.go

-- main_test.go --
package main_test

import (
  "testing"
  "gitlab.com/mnm/bud/is"
  "myapp.com/web"
  genweb "myapp.com/gen/web"
)

func Test(t *testing.T) {
  is := is.New(t)
  c := &web.C{"C"}
  expect := `&web.Web{a: &web.A{Value: "A", B: &web.B{Value: "B"}, C: &web.C{Value: "C"}}, c: &web.C{Value: "C"}}`
  actual := genweb.Load(&web.A{"A", &web.B{"B"}, c}, c)
  is.Value(actual, expect)
}

-- go.mod --
module myapp.com

require (
  gitlab.com/mnm/bud v0.0.0
)

-- web/web.go --
package web

type A struct {
  Value string
  *B
  *C
}

type B struct {
  Value string
}

type C struct {
  Value string
}

// New web
func New(a *A, c *C) *Web {
  return &Web{a, c}
}

// Web struct
type Web struct {
  a *A
  c *C
}

