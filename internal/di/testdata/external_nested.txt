-- input.json --
{
  "dependencies": [
    {
      "import": "myapp.com/web",
      "type": "*Web"
    }
  ],
  "externals": [
    {
      "import": "myapp.com/web",
      "type": "*A"
    },
    {
      "import": "myapp.com/web",
      "type": "*B"
    },
    {
      "import": "myapp.com/web",
      "type": "*C"
    }
  ],
  "target": "gen/web"
}

-- expect.txt --
&web.Web{
  a: &web.A{
    Value: "A",
    B:     &web.B{Value: "B"},
    C:     &web.C{Value: "C"},
  },
  c: &web.C{Value: "C"},
}

-- main.go --
package main

import (
  "os"
  "fmt"
  "github.com/hexops/valast"
  web "myapp.com/web"
  genweb "myapp.com/gen/web"
)

func main() {
  c := &web.C{"C"}
  actual := genweb.Load(&web.A{"A", &web.B{"B"}, c}, c)
  fmt.Fprintf(os.Stdout, "%s\n", valast.String(actual))
}

-- go.mod --
module myapp.com

require (
  github.com/hexops/valast v1.4.1
)

-- web/web.go --
package web

type A struct {
  Value string
  *B
  *C
}

type B struct {
  Value string
}

type C struct {
  Value string
}

// New web
func New(a *A, c *C) *Web {
  return &Web{a, c}
}

// Web struct
type Web struct {
  a *A
  c *C
}

