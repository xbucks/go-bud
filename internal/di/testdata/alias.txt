-- input.json --
{
  "dependencies": [
    {
      "import": "myapp.com/web",
      "type": "*Web"
    }
  ],
  "target": "gen/web"
}

-- expect.txt --
&web.Web{Public: &public.publicMiddleware{}}

-- main.go --
package main

import (
  "os"
  "fmt"
  "github.com/hexops/valast"
  "myapp.com/gen/web"
)

func main() {
  actual := web.Load()
  fmt.Fprintf(os.Stdout, "%s\n", valast.String(actual))
}

-- go.mod --
module myapp.com

require (
  github.com/hexops/valast v1.4.1
)

-- web/web.go --
package web

import (
  "myapp.com/public"
)

// Web struct
type Web struct {
  Public public.Middleware
}

-- public/public.go --
package public

import (
  "net/http"
  "myapp.com/middleware"
)

func New() Middleware {
  return &publicMiddleware{}
}

type Middleware = middleware.Middleware

type publicMiddleware struct{
}

func (p *publicMiddleware) Middleware(handler http.Handler) http.Handler {
  return handler
}

-- middleware/middleware.go --
package middleware

import (
  "net/http"
)

type Middleware interface {
  Middleware(handler http.Handler) http.Handler
}
